<ng-container *ngIf="cart$ | async as cart">
  <div *ngIf="cart?.id" class="mb-2 grid gap-3 bg-dib-gray-100 p-6">
    <div class="flex flex-col flex-wrap">
      <!-- Get agent info by ID and display agents full name and completion date -->
      <div *ngIf="cart.isCreatedByAgent && (agent$ | async) as agent" class="mb-2 flex flex-col border-b pb-2">
        <span class="whitespace-nowrap">Generated by agent {{ agent.firstName + ' ' + agent.lastName }}</span>
        <span class="text-xs text-gray-600" *ngIf="cart.isCompletedByAgent">
          {{ cart.createdAt | dibDate: 'uiWithTime' }}
        </span>
      </div>

      <span>{{ cart.tripStatus }}</span>
    </div>

    <div class="flex items-baseline whitespace-nowrap text-gray-500">
      <span class="mr-1 text-3xl">{{ cart.price.totalPrice | number: '1.2-2' }}</span>
      <small>{{ cart.price.currency }}</small>
    </div>
    <div class="grid">
      <!-- TODO: Check about this label and how can we determine if price includes taxes -->
      <!-- <span>Inclusive tax.</span> -->
      <span *ngIf="cart.invoiceSentToAdmin">Invoice is sent to company admin.</span>
    </div>
  </div>
  <ng-container *ngIf="cart.currentOrder?.orderReferenceFields as fields">
    <div class="mb-4" *ngIf="fields.projects">
      <div class="text-xs text-gray-500">Project</div>
      <div>{{ fields.projects }}</div>
    </div>
    <div class="mb-4" *ngIf="fields.purposeOfTrip">
      <div class="text-xs text-gray-500">Purpose of Trip</div>
      <div>{{ fields.purposeOfTrip }}</div>
    </div>
    <div class="mb-4" *ngIf="fields.yourReference">
      <div class="text-xs text-gray-500">Your Reference</div>
      <div>{{ fields.yourReference }}</div>
    </div>
  </ng-container>
</ng-container>

<!-- TODO: Check with BE about new API to get the invoices (or add invoices to the current API) -->
<!-- <div class="flex flex-col space-y-1">
  <small class="text-xs text-gray-500">Invoice number(s)</small>
  <span>ci-ninja-12041984</span>
  <span>ci-ninja-456419284</span>
  <span>ci-ninja-6780419284</span>
  <span>ci-ninja-99949284</span>
</div> -->
